**시도하고 또 시도하라**

모델에서 시도해볼 수 있을 만큼 명확하고 유용해 보이는 지식을 발견하기까지 대화로 표현한 시행착오를 6번 정도는 반복해야 한다. 아울러 새로운 경험과 축적과 지식탐구를 거쳐 더 훌룡한 아이디어가 떠오르면서 나중에 적어도 한 번은 기존의 결과를 바꾸게 될 것이다.모델러/설계자는 자신의 아이디어에 집착해서는 안된다.

 모든 방향 선회가 단지 갈팡질팡하는 것에 불과하는 것은 아니다. 각 방향 선회는 모델에 좀더 심층적인 통찰력을 반영했음을 의미한다. 각 리팩토링은 더 유연하고, 차후에 좀더 변경하기 수월하며, 수정해야 할 것으로 판명된 곳을 지체하지 않고 바로 수정할 수 있게 모델의 상태를 유지해준다.

 **어차피 선택의 여지는 없다.** 실험은 유용한 것이 무엇이고 유용하지 않은 것이 무엇인지를 배우는 방법이다. 설계 과정에서 실수를 피하려고 발버둥친다면 더 적은 경험을 바탕으로 설계를 해야 하는 탓에 품질이 더 낮은 결과물을 얻게 될 것이다. 그리고 어쩌면 여러 번의 신속한 실험을 거쳐 설계를 하는 것에 비해 시간이 더 오래 걸릴 수도 있다.



**다소 불명확한 개념을 모델링하는 법**

흔히 객체지향을 하기 위해서는 개념을 찾기 위해 "명사와 동사"를 조사해보라고 설명한다. 그러나 "명사와 동사"로 표현되지 않는 다른 중요한 범주의 개념도 모델 내에 명시적으로 표현할 수 있다.

 저자는 객체지향 설계를 시작할 당시에는 명확한 개념으로 인식하지 못했던 세 가지 범주에 관해 논의한다.

1. 명시적인 제약 조건 (constraint) 특별히 중요한 범주의 모델 개념을 형성  
   ex) "Bucket" 객체는 제한된 용량(capacity)을 초과해서 저장할 수 없다는 불변식(invariant)을 만족시켜야 한다.

![image-20230225113837090](https://raw.githubusercontent.com/LenKIM/images/master/2023-02-25/image-20230225113837090.png)

아주 단순하게 시작하므로 규칙을 명확하게 식별할 수 있다.그러나 더 복잡한 클래스 안에 제약조건을 표현할 때는 제약 조건을 표현하는 부분을 파악하기가 어려워질 수 있다. 그럴때는 제약조건을 별도의 메서드로 분리하고 제약조건의 의미를 분명하고 명확하게 표현할 수 있게 메서드의 이름을 짓는다.

![image-20230225114449268](https://raw.githubusercontent.com/LenKIM/images/master/2023-02-25/image-20230225114449268.png)

**도메인 객체로서의 프로세스**

 **절차(procedure)를 모델의 주요한 측면으로 삼고 싶지 않다는 점을 동의하자.** 객체는 절차를 캡슐화해서 절차 대신 객체의 목표나 의도에 관해 생각해야 한다.

이야기하고자하는 대상은 도메인에 존재하는 프로세스이며, 우리는 모델 내에 프로세스를 표현. 프로세스가 나타나면 객체를 어색하게 설계하는 경향이 있다.

 해운 시스템에서 SERVICE는 그러한 프로세스를 명시적으로 표현하는 한 가지 방법이기는 하지만 복잡한일을 한다. 이럴 때 또다른 접근법으로는 알고리즘 자체 또는 그것의 일부를 하나의 객체로 만드는 것. 어떤 프로세스를 선택할 것인가는 곧 어떤 객체를 선택할 것인가가 되고, 각 객체는 각기 다른 STRATEGY를 표현한다.

명시적으로 표현해야 할 프로세스와 숨겨야할 프로세스를 구분하는 비결은 간단하다. 이것이 도메인 전문가가 이야기하고 있는 프로세스인가? 아니면 단순히 컴퓨터 프로그램상의 메커니즘의 일부일뿐인가?



제약조건과 프로세스는 잘 떠오르지 않는 범주이지만, 모델의 요소로 간주하면 모델이 쉬워진다.



--

**SPECIFICATION 의 적용과 구현**

1. 객체가 어떤 요건을 충족시키거나 특정 목적으로 사용할 수 있는지 가늠하고자 객체를 검증
2. 컬렉션 내의 객체를 선택(이를 테면, 기한이 만료된 송장 목록을 조회)
3. 특정한 요구사항을 만족하는 새로운 객체의 생성을 명시

검증(validation), 선택(selection), 요청 구축(building to order)

![image-20230225121723314](https://raw.githubusercontent.com/LenKIM/images/master/2023-02-25/image-20230225121723314.png)

![image-20230225122008710](https://raw.githubusercontent.com/LenKIM/images/master/2023-02-25/image-20230225122008710.png)

![image-20230225122129653](https://raw.githubusercontent.com/LenKIM/images/master/2023-02-25/image-20230225122129653.png)

![image-20230225122156101](https://raw.githubusercontent.com/LenKIM/images/master/2023-02-25/image-20230225122156101.png)



--

