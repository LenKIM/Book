# 16. 변경이 가능할 만큼 코드를 이해하지 못하는 경우



두려움을 느낀다. 내가 잘 알지 못하는 코드에 발을 들일때는. 또는 어떤 사람들은 면역이 생기기도 한다. 

어떻게 해야될까?



## 1. 노트/스케치을 활용한다.

![image-20230426174645769](https://raw.githubusercontent.com/LenKIM/images/master/2023-04-26/image-20230426174645769.png)

- 스케치가 완벽할 필요가 없다. 다만, 그림이 복잡해질 수록 효율적인 표현을 위해 좀 더 정형화된 표기법을 사용하고 싶어질 것이다.
- 코드 설계를 이해하고자 노력할 때 스케치를 봄으로써 얻을 수 있는 장점은 형식에 얽매이지 않는 영향력이 있다는 것.

## 2. 표시 나열

- 매우 규모가 큰 메서드일 때 유용하다
- 표시나열 기법은 이해하려는 대상에 따라 달라진다. 먼저 작업 대상 코드를 프린터로 출력한다. 
- 그리고 다음과 같은 용도별로 표시 나열 기법을 사용할 수 있다.

### 책임 기법

- 책임을 분리할 때는 대상을 그룹별로 나누기 위해 표시를 사용. 몇 개의 대상이 동일 그룹에 속한다면, 이것들을 식별할 수 있도록 각각에 특별한 기호를 표시한다.

### 메서드 구조의 이해

- 코드의 길이가 긴 대규모 메소드의 구조를 이해하고 싶을 때는 코드 블록에 선을 긋는다.
- 코드 블록에 선을 긋는 가장 쉬운 방법은 안쪽에서 바깥쪽으로 하는 것
- 형광펜으로 색깔별로 하면 되지 않을까?

### 메서드 추출

- 코드의 길이가 긴 대규모 메소드를 분리하고 싶을 때는 추출하려는 코드 주변을 원으로 표시한다. 그리고 결합 카운트를 주석으로 단다.

### 변경 영향의 이해

- 수행하려는 변경의 영향을 이해하고 싶을 때는 영향 스케치를 작성하는 대신에 변경하려는 코드에 표시. 그리고 나서 변경으로 인해 값이 바뀔 가능성이 있는 변수와 영향을 받을 가능성이 있는 메소드 호출에 모두 표시



## 3. 스크래치 리팩토링

- 코드를 배우는 최선의 기법 가운데 하나는 바로 리팩토링. 코드에 뛰어들어 깔끔하게 만드는 것.
- 다만, 테스트 루틴이 준비되어 있지 않을 경우 위험한 작업이 될 수 있다. 그럼 어떻게? 방법이 있다.

1. 버전 관리 시스템에서 코드를 체크아웃한다.
2. 메서드 추출이든 변수 이동이든 다양한 방법으로 마음껏 리팩토링한다. 단, 그 코드는 다시 체크인하지 말고 그냥 버린다. 
3. 이를 스크래치 리팩토링 기법이라 한다.



아하.. 여러번 다뤄보면서 그 코드를 익숙하게 만드는 방법이구나. 스크래치를 내면서 코드를 리팩토링하는 거구나



이렇게 하더라도 위험한 요소가 있다.

- 리팩토링 중에 무언가 착각해서 시스템이 실제로는 하지 않는 일을 하고 있다고 잘못 믿어버리는 것. 이 경우 시스템에 대한 잘못된 관점을 가지게 되고 나중에 실질적인 리팩토링을 주저하게 된다.
- 리팩토링한 결과에 집착하게 돼 항상 그 결과에 맞쳐서 생각하게 되는 것. 얼핏 이는 그다지 나쁜 것 같지 않아 보이지만, 큰 문제를 일으킬 가능성이 있다.



스크래치 리팩토링은 코드의 중요한 부분을 이해하고 확신할 수 있는 좋은 방법이며, 이후의 변경 작업을 수월하게 해준다. 

모퉁이 저편에 언제나 무서운 괴물이 숨어있는 것만은 아니라는 확신을 얻을 수 있다. 혹시 그러한 것이 있더라도, 최소한 미리 간파할 수 있다.



## 미사용 코드 삭제

혼란스럽고 사용하지 않는 것으로 판단되는 코드는 즉시 삭제한다. 방해만 될 뿐 아무것도 하지 않는 코드이다.