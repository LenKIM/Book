# chapter 2 다이어그램으로 작업하기

해당 글은 Robert C.Martin 'UML 실전에서는 이것만 쓴다' 라는 책을 읽고 학습한 내용을 정리 및 회고하는 글 입니다.

UML 실전에서는 이것만 쓴다 - JAVA 프로그래머를 위한 UML
인사이트 출판사
지은이: Robert C.Martin (Uncle Bob)
옮긴이: 이용원, 정지호

<div align="center">
 <img src="https://tva1.sinaimg.cn/middle/e6c9d24egy1h1rkahxn5mj20440590so.jpg" style="width: 200px; height: 200px" alt="pic">
</div>

# 이번 장에서 이야기하고자 하는 것

UML 을 왜 사용하는 걸까? 언제 써야하는걸까? 그런 질문에 대한 나만의 생각을 정리하기 좋은 부분 인 것같다.

**왜 모델을 만들어야 하는가?**

 건축가는 빌딩의 모델을 만들어서 건축주가 그 빌딩의 모습을 좋아할지 알아본다. 즉 **'어떤 것이 실제로도 잘 작동하는지 알아보려고 만드는 것이 모델이다'**



 모델을 만듬으로써, 시험해 볼수 있는 환경이 만들어진다. 만약  우리가 만든 모델을 평가할 수 없다면, 그 모델은 가치가 없다.



**왜 소프트웨어 모델을 만드는가?**

UML  다이어그램을 만든다는 것은 이 또한 시험하기 위한 비용을 줄이기 위한 방법일 것이다. 그러나, UML 다이어그램이 건축도면과 같은 모델과 다른 점은 UML 다이어그램은 여러 원칙과 패턴을 적용해볼 수 있지만, 굉장히 주관적일 뿐만 아니라 **무엇보다도 UML은 소스코드로 변환되어져야 한다는 것**이다. 이 과정에서 비용이 발생할 수 있다.



**그렇다면, 왜 UML 다이어그램을 만드는 걸까?**

> 시험해 볼 구체적인 것이 있고, 그것을 코드로 시험해 보는 것보다 UML로 시험해 보는 쪽이 비용이 덜 들때 UML을 사용한다. 예를 들어서 설계 아이디어가 하나가 떠올랐다고 해보자. 우리 팀의 다른 개발자들이 그 아이디어를 괜찮게 생각하는지 시험해 봐야 하지 않을까? 그럴 때 나는 칠판에 UML 다이어그램을 그려놓고 팀원들에게 어떻게 생각하냐고 물어본다.



UML은 타 건축에서 쓰이는 청사진과 같은 역할을 하는걸까? 사실 그렇지 않을 수 있다. 왜냐하면, 소프트웨어 모델은 UML을 작성하는 경우보다 코드를 바로 작성하는 비용이 더 적을 수 있기 때문에 추적불가능한 리소스이기 때문이다.

## 효율적으로 UML을 사용하는 방법은?



**다른 사람들과 의사소통하기위해서**

 UML은 소프트웨어 개발자끼리 설계 개념에 대한 의견을 주고받을 때 굉장히 편리하며, 몇몇 개발자가 칠판 주위에 모여서 많은 일을 할 수 있게 해준다. 만약 다른 사람에게 말해 줄 아이디어가 있다면, UML은 큰 도움이 된다.

**로드맵을 그리기 위해서**

 UML은 대규모 소프트웨어 구조의 로드맵(road map)을 만들 때 유용하다. 어떤 클래스가 다른 클래스에 의존하는지 개발자가 빨리 파악할 수 있게 해죽 전체 시스템의 구조에 대한 참조 도표로도 사용된다.



**백엔드(back-end) 문서**

 설계에 대한 문서를 작성하기에 가장 적당한 때는 언제일까? 문서 작성을 프로젝트 막바지에 팀의 마지막 작업으로 하는 것이 가장 좋다.

 그러나, 무자비하게 많은 UML 다이어그램은 조심해야 한다. 우리가 원하는 것은 시스템의 핵심 내용을 짚어서 기술하는 핵심적인 다이어그램 몇 개다. 



**무엇을 보관하고 무엇을 버려야 하는가?**

 UML 다이어그램을 던져 버리는 습관을 길러라. 더 좋은 방법은 다이어그램을 오랫동안 기록되는 매체에 기록하지 않는 습관을 기르는 것이다. 칠판이나 종이 조각에 다이어그램을 지워라.

 반대로, 저장해놓으면 좋은 다이어그램은 여러분의 시스템 안에서 자주 사용되는 설계상의 해결 방법을 표현하는 것이 여기에 포함된다. 코드에서 알아내기는 힘들지만 꼭 지켜야 하는 복잡한 절차를 기록해 놓은 것이 그렇다.



## 반복을 통해 다듬기

 UML은 한번에 만들어 질 수 없다. 한순간 번뜩이는 통찰력으로 일필휘지로 그리는가? 클래스 다이어그램을 그린 다음 시퀀스 다이어그램을 그리는가? 구체적인 세부사항에 들어가기에 앞서 시스템 구조의 골격을 모두 짜놓아야 하는가?

 그렇지 않다. 작은 단계를 하나씩 밟아가며 단계마다 무엇을 했는지 평가하는 방식으로 되는 일을 잘한다. 사람들은 단계마다 크게 도약하며 이루어지는 일을 잘하지 못한다. 우리는 쓸모 있는 UML 다이어그램을 만들고 싶다. 그러므로 작은 단계를 하나씩 밟아나가자.



### 행위를 제일 먼저 생각하기.

 행위(behavior) 부터 시작하는 것이 좋다. 간단한 시퀀스 다이어그램으로 그리며 그 문제를 풀어보는 시도를 해보자.

![image-20220501132324543](https://tva1.sinaimg.cn/large/e6c9d24egy1h1sseif7dwj215m0ecdg9.jpg)

 ***이러한 행위를 제일 먼저 생각하는 것은 의존관계를 당장 중요하게 생각하고 분석하는 일이다.***

왜 Button이 Dialer 에  의존해야 하는가? 이를 잘 고민해보면, 의존관계가 매우 나쁘다는 사실을 알게 된다.

 Button 이 항상 Dialer 에 의존하지 않고, 다른 용도로 버튼이 쓰일 수 있게 만들기 위해서다.



 Button과 Dialer 의 의존관계를 느슨하게 하기 위해서 중간에 Listener 을 만든다.

![image-20220501133014845](https://tva1.sinaimg.cn/large/e6c9d24egy1h1sslksv77j215g0lmaax.jpg)

한 단계 더 나아가 Dialer가 Button 을 알아야 한다. 어떻게 Dialer가 꼭 ButtonListener에서 입력이 들어올 것이라고 기대해야 하는가? Dialer 클래스 안에 buttonPressed라는 메서드가 들어있어야 하는가? 

 자그만한 어탭터를 몇 개 쓰면 이 문제를 풀 수 있으며, 덤으로 식별자 토큰 사용이라는 어설픈 아이디어도 없앨 수 있다. ButtonDialerAdapter 는 ButtonListener 인터페이스를 구현한다.

![image-20220501133720798](https://tva1.sinaimg.cn/large/e6c9d24egy1h1sssz5hvbj215k0g4dhq.jpg)

![image-20220501133743369](https://tva1.sinaimg.cn/large/e6c9d24egy1h1sstcoh6nj215e0maab5.jpg)

Adapter 가 추가되어 위와같은 다이어그램으로 진화됨을 볼 수 있다.



우리는 아이디어를 굳이 긴 코드로 작성하지 않고 간결한 그림으로 표현하기 위해 다이어그램을 사용하는 것이지, 다이어그램으로 코드를 대신하 려는 것이 아니다. 다이어그램을 그려놓고 그 다이어그램이 나타내는 코드를 마음속으로 그려 보지 못한다면, 공중에 누락을 짓는 것과 다를 바 없다. '지금 하는 작업을 당장 중단하고 어떻게 그 다이어그램을 코드로 바꿀 수 있는지 찾아내라' 다이어그램 자체가 목적이 되어서는 안 된다.

![image-20220501142200933](https://tva1.sinaimg.cn/large/e6c9d24egy1h1su3gg2elj21780ng0ug.jpg)

